# Chapter 5. 네오픽셀 기초 – 한 칸에서 5x5까지

> **PART 2**: 헥사보드 기본 제어 – 버튼과 네오픽셀

---

## 📚 이 챕터에서 배울 내용

- [ ] 네오픽셀 1개를 켜고 끌 수 있다
- [ ] 네오픽셀의 색상을 바꿀 수 있다
- [ ] 5×5 네오픽셀 전체를 제어할 수 있다

**예상 소요 시간**: 40분

---

## 🎯 학습 목표

### 핵심 개념

- **네오픽셀**: 개별 제어 가능한 RGB LED
- **RGB**: Red(빨강), Green(초록), Blue(파랑)의 조합으로 색상 표현
- **인덱스**: LED의 위치 번호 (0번부터 시작)

---

## 📖 네오픽셀이란?

### RGB LED의 마법

네오픽셀은 **WS2812B** 칩이 내장된 LED입니다.

**특징**:

- 빨강, 초록, 파랑을 섞어서 1,600만 가지 색상 표현
- 각 LED를 개별적으로 제어 가능
- 한 줄로 연결 (체인 방식)

**색상 조합**:

```
빨강(255, 0, 0)
초록(0, 255, 0)
파랑(0, 0, 255)
흰색(255, 255, 255)
보라(255, 0, 255)
노랑(255, 255, 0)
꺼짐(0, 0, 0)
```

> 💡 **팁**: 숫자가 클수록 밝아집니다! (0~255)

### 헥사보드의 네오픽셀

- **개수**: 25개 (5행 × 5열)
- **GPIO**: 23번
- **번호**: 0번부터 24번까지

```
네오픽셀 배치 (5×5)
┌─────────────┐
│ 0  1  2  3  4 │
│ 5  6  7  8  9 │
│10 11 12 13 14│
│15 16 17 18 19│
│20 21 22 23 24│
└─────────────┘
```

---

## 🔧 실습 준비

### 필요한 것

- [x] 헥사보드 × 1
- [x] USB 케이블 × 1
- [x] Thonny IDE

---

## 💻 실습 1: 첫 번째 LED 켜기

### LED 1개 켜기

**코드**:

```python
# 파일명: ch05_neopixel_one.py
# 네오픽셀 1개 켜기

from machine import Pin
import neopixel
import time

# 네오픽셀 설정
NUM_LEDS = 25  # LED 개수
PIN = 23       # GPIO 핀

# 네오픽셀 초기화
np = neopixel.NeoPixel(Pin(PIN), NUM_LEDS)

# 0번 LED를 빨간색으로
np[0] = (255, 0, 0)  # (R, G, B)
np.write()  # 실제로 켜기!

print("0번 LED가 빨간색으로 켜졌습니다!")
```

**코드 설명**:

- `neopixel.NeoPixel()`: 네오픽셀 객체 생성
- `np[0] = (255, 0, 0)`: 0번 LED를 빨간색으로 설정
- `np.write()`: 설정을 LED에 전송 (꼭 필요!)

### 실행하기

1. 코드를 입력하세요
2. ▶️ 실행
3. 왼쪽 위 LED가 빨간색으로 켜집니다!

---

## 💻 실습 2: 색상 바꾸기

### 여러 색상 표현하기

**코드**:

```python
# 파일명: ch05_neopixel_colors.py
# 여러 색상 표현하기

from machine import Pin
import neopixel
import time

NUM_LEDS = 25
PIN = 23

np = neopixel.NeoPixel(Pin(PIN), NUM_LEDS)

# 색상 리스트
colors = [
    (255, 0, 0),    # 빨강
    (0, 255, 0),    # 초록
    (0, 0, 255),    # 파랑
    (255, 255, 0),  # 노랑
    (255, 0, 255),  # 보라
    (0, 255, 255),  # 청록
    (255, 128, 0),  # 주황
    (255, 255, 255) # 흰색
]

print("색상이 바뀝니다...")

# 색상 순서대로 표시
for color in colors:
    np[0] = color
    np.write()
    print(f"색상: {color}")
    time.sleep(1)

# 끄기
np[0] = (0, 0, 0)
np.write()
print("완료!")
```

**실행 결과**:

- 0번 LED가 1초마다 색상이 바뀝니다
- 총 8가지 색상

---

## 💻 실습 3: 여러 LED 켜기

### 5개 LED 켜기

**코드**:

```python
# 파일명: ch05_neopixel_multiple.py
# 여러 LED 켜기

from machine import Pin
import neopixel
import time

NUM_LEDS = 25
PIN = 23

np = neopixel.NeoPixel(Pin(PIN), NUM_LEDS)

# 처음 5개 LED를 서로 다른 색으로
np[0] = (255, 0, 0)    # 빨강
np[1] = (0, 255, 0)    # 초록
np[2] = (0, 0, 255)    # 파랑
np[3] = (255, 255, 0)  # 노랑
np[4] = (255, 0, 255)  # 보라

np.write()

print("5개 LED가 켜졌습니다!")
print("Ctrl+C로 종료하세요")

# 프로그램 유지
while True:
    time.sleep(1)
```

**결과**:

```
┌─────────────┐
│🔴🟢🔵🟡🟣│  ← 첫 줄만 켜짐
│░░░░░░░░░░│
│░░░░░░░░░░│
│░░░░░░░░░░│
│░░░░░░░░░░│
└─────────────┘
```

---

## 💻 실습 4: 전체 LED 제어

### 모든 LED를 같은 색으로

**코드**:

```python
# 파일명: ch05_neopixel_all.py
# 전체 LED를 같은 색으로

from machine import Pin
import neopixel
import time

NUM_LEDS = 25
PIN = 23

np = neopixel.NeoPixel(Pin(PIN), NUM_LEDS)

def fill(color):
    """모든 LED를 같은 색으로"""
    for i in range(NUM_LEDS):
        np[i] = color
    np.write()

# 빨간색으로 채우기
print("빨간색!")
fill((255, 0, 0))
time.sleep(2)

# 초록색으로 채우기
print("초록색!")
fill((0, 255, 0))
time.sleep(2)

# 파란색으로 채우기
print("파란색!")
fill((0, 0, 255))
time.sleep(2)

# 끄기
print("끄기!")
fill((0, 0, 0))
```

**핵심 아이디어**:

- `for` 반복문으로 모든 LED 제어
- `fill()` 함수로 재사용 가능

---

## 💻 실습 5: 간단한 애니메이션

### LED가 하나씩 켜지는 효과

**코드**:

```python
# 파일명: ch05_neopixel_wave.py
# LED 웨이브 효과

from machine import Pin
import neopixel
import time

NUM_LEDS = 25
PIN = 23

np = neopixel.NeoPixel(Pin(PIN), NUM_LEDS)

# 모두 끄기
for i in range(NUM_LEDS):
    np[i] = (0, 0, 0)
np.write()

print("웨이브 시작!")

# LED가 순서대로 켜짐
for i in range(NUM_LEDS):
    # 이전 LED 끄기
    if i > 0:
        np[i-1] = (0, 0, 0)

    # 현재 LED 켜기
    np[i] = (0, 255, 0)  # 초록색
    np.write()

    time.sleep(0.1)

# 마지막 LED 끄기
np[NUM_LEDS-1] = (0, 0, 0)
np.write()

print("완료!")
```

**효과**:

- 초록색 LED가 0번부터 24번까지 순서대로 이동
- 물결치는 듯한 효과

---

## ✅ 동작 확인

**정상 동작하면**:

- ✅ 실습 1: 0번 LED가 빨간색으로 켜짐
- ✅ 실습 2: 0번 LED가 8가지 색으로 변함
- ✅ 실습 3: 첫 줄 5개 LED가 서로 다른 색으로 켜짐
- ✅ 실습 4: 전체 LED가 빨강 → 초록 → 파랑으로 변함
- ✅ 실습 5: LED가 순서대로 이동

---

## 🐛 문제 해결

### 문제 1: LED가 안 켜져요

**해결 방법**:

1. `np.write()` 를 빼먹지 않았나요?
2. 핀 번호가 23번이 맞나요?
3. 헥사보드가 연결되어 있나요?

```python
# 올바른 순서
np[0] = (255, 0, 0)
np.write()  # 꼭 필요!
```

### 문제 2: 색이 이상해요

**해결 방법**:

- RGB 순서를 확인하세요
- 각 값은 0~255 범위

```python
# 올바른 색상 값
np[0] = (255, 0, 0)    # 빨강 ✅
np[0] = (256, 0, 0)    # 잘못됨 ❌ (255 초과)
np[0] = (100, 100, 100) # 밝은 회색 ✅
```

### 문제 3: 너무 밝아요!

**해결 방법**:

- 숫자를 줄이세요 (밝기 조절)

```python
# 밝기 50%
np[0] = (128, 0, 0)   # 어두운 빨강

# 밝기 20%
np[0] = (50, 0, 0)    # 더 어두운 빨강
```

---

## 🎓 핵심 요약

### 오늘 배운 것

1. **네오픽셀 기본**: RGB 색상 조합
2. **개별 제어**: `np[0] = (R, G, B)`
3. **전체 제어**: 반복문으로 모든 LED 제어
4. **애니메이션**: 시간 지연으로 움직이는 효과

### 핵심 코드

```python
# 네오픽셀 초기화
np = neopixel.NeoPixel(Pin(23), 25)

# LED 켜기
np[0] = (255, 0, 0)  # 빨간색
np.write()           # 실제로 표시!

# 모두 끄기
for i in range(25):
    np[i] = (0, 0, 0)
np.write()
```

---

## 🚀 도전 과제

### 과제 1: 무지개 만들기 ⭐️

첫 줄 5개 LED를 무지개 색으로 만들어보세요!

```
🔴🟠🟡🟢🔵
```

**힌트**: 빨강, 주황, 노랑, 초록, 파랑

### 과제 2: 깜빡이는 LED ⭐️⭐️

전체 LED가 켜졌다 꺼졌다 반복하게 만들어보세요.

**힌트**: `while True` + `time.sleep()`

### 과제 3: 십자가 패턴 ⭐️⭐️

5×5 LED의 가운데 십자(+) 모양만 켜보세요!

```
░░🔴░░
░░🔴░░
🔴🔴🔴🔴🔴
░░🔴░░
░░🔴░░
```

**힌트**:

- 세로: 2, 7, 12, 17, 22번
- 가로: 10, 11, 12, 13, 14번

---

## 🎨 색상 참고표

```python
# 기본 색상
RED     = (255, 0, 0)
GREEN   = (0, 255, 0)
BLUE    = (0, 0, 255)
YELLOW  = (255, 255, 0)
PURPLE  = (255, 0, 255)
CYAN    = (0, 255, 255)
WHITE   = (255, 255, 255)
OFF     = (0, 0, 0)

# 파스텔 톤 (밝기 50%)
PINK    = (255, 128, 128)
MINT    = (128, 255, 128)
LAVENDER= (128, 128, 255)

# 어두운 톤 (밝기 20%)
DARK_RED = (50, 0, 0)
DARK_GREEN = (0, 50, 0)
DARK_BLUE = (0, 0, 50)
```

---

## 📝 학습 체크

- [ ] 네오픽셀 1개를 켜고 색상을 바꿀 수 있나요?
- [ ] 여러 LED를 동시에 제어할 수 있나요?
- [ ] `np.write()`의 역할을 이해했나요?
- [ ] RGB 색상 조합을 이해했나요?

**완료 시간**: \_\_\_시 \_\_\_분

---

**다음 챕터**: Chapter 6 - 버튼 + 네오픽셀로 만드는 상태 머신

버튼과 LED를 결합하면 더 재미있는 프로젝트를 만들 수 있습니다!

---

> **💡 TIP**: 네오픽셀은 밝기를 낮춰서 사용하면 눈이 편하고 전력도 절약됩니다!

---

**챕터 작성**: 2025-11-25  
**작성자**: AIoT eBook Team
